---
layout: post
title: 'Функция main(): сделаем мир безопаснее'
created: 1318013448
categories:
- c++
---
<!--break-->
Друзья! А почему бы нам чуток не обезопасить функцию <strong>main()</strong>? Смотрите, вот её каноническое определение:

<cpp>
int main( int arguments_quantity, char* arguments[] ) {
    //
}
</cpp>Канонические имена <strong>argc</strong> и <strong>argv</strong> я заменил на более литературные, но не суть.

Однако подобная форма позволяет программисту сделать вот такую глупость:

<cpp>
int main( int arguments_quantity, char* arguments[] ) {
    ++arguments_quantity; // Первая глупость.
    arguments[123] = "";  // Вторая глупость.
}
</cpp>

Причём подобные глупые действия, разумеется, не приведут к ошибке компиляции (ну разве что во второй глупой строке получит программист предупреждение, мол, запрещённое конвертирование строки в char*). Однако запуск такой программы не сулит ничего хорошего.

Конечно, вероятность возникновения подобных ошибок очень, очень низка, но почему бы не сделать так, чтобы подобные глупости не прошли вовсе:

<cpp>
int main( const int arguments_quantity, char* const arguments[] ) {
    ++arguments_quantity; // Компилятор на страже!
    arguments[123] = "";  // И тут тоже на страже!
}
</cpp>

Формально, мы как бы изменили принятую сигнатуру функции <strong>main()</strong>. Но добавление const в <em><ins>данном случае</ins></em> реально не меняет её.

Мелочь, конечно, а приятно.
