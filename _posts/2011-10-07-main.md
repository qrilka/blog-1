---
layout: post
title: 'Функция main(): сделаем мир безопаснее'
created: 1318013448
categories:
- c++
---
<!--break-->
Друзья! А почему бы нам чуток не обезопасить функцию **main()**? Смотрите, вот её каноническое определение:

{% highlight cpp %}
int main( int arguments_quantity, char* arguments[] ) {
    //
}
{% endhighlight %}Канонические имена **argc** и **argv** я заменил на более литературные, но не суть.

Однако подобная форма позволяет программисту сделать вот такую глупость:

{% highlight cpp %}
int main( int arguments_quantity, char* arguments[] ) {
    ++arguments_quantity; // Первая глупость.
    arguments[123] = "";  // Вторая глупость.
}
{% endhighlight %}

Причём подобные глупые действия, разумеется, не приведут к ошибке компиляции (ну разве что во второй глупой строке получит программист предупреждение, мол, запрещённое конвертирование строки в char*). Однако запуск такой программы не сулит ничего хорошего.

Конечно, вероятность возникновения подобных ошибок очень, очень низка, но почему бы не сделать так, чтобы подобные глупости не прошли вовсе:

{% highlight cpp %}
int main( const int arguments_quantity, char* const arguments[] ) {
    ++arguments_quantity; // Компилятор на страже!
    arguments[123] = "";  // И тут тоже на страже!
}
{% endhighlight %}

Формально, мы как бы изменили принятую сигнатуру функции **main()**. Но добавление const в *<ins>данном случае</ins>* реально не меняет её.

Мелочь, конечно, а приятно.
