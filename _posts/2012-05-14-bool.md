---
layout: post
title: Возвращаемое значение bool как признак...
created: 1337018808
categories:
- !binary |-
  0JvQuNGC0LXRgNCw0YLRg9GA0L3QvtC1INC/0YDQvtCz0YDQsNC80LzQuNGA
  0L7QstCw0L3QuNC1
---
Эта практика распространена повсеместно.

Итак:
{% highlight cpp %}
bool open( std::string const& file );
{% endhighlight %}Допустим, что file - это путь к файлу, и мы его открываем. Не так важно, где тут у нас объект (поток или, скажем, дескриптор), ассоциированный с открытым файлом, суть не в этом. Суть в возвращаемом значении, поскольку именно оно (очень часто) сигнализирует нам о корректности открытия файла.

Вот как может выглядеть вызов этой функции:
{% highlight cpp %}
if( open( "~/file" ) )
{% endhighlight %}Ну и что же мы проверяем тут, корректность или некорректность открытия файла? Совершенно непонятно. Поэтому функция такого вида - плохая.

Если функция, возвращающая bool, предназначена (чаще всего) для встаивания в конструкции типа **if** или **while**, то она должна порождать единое выражение с соответствующим ключевым словом. Тогда вопросов о возвращаемом признаке уже не возникнет.

Скажем, так:
{% highlight cpp %}
if( session_is_opened() )
{% endhighlight %}Здесь смысл возвращаемого значения понятен с первого прочтения. Или так:
{% highlight cpp %}
while( not_all( messages ).was_sent() )
{% endhighlight %}Мы сразу понимаем, чем именно обусловлен этот цикл.
