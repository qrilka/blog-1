---
layout: post
title: 'Haskell: об инфиксных функциях'
created: 1387953488
categories:
- haskell
---
<!--break-->
Как мы уже знаем, вызов чистой функции выглядит так:

<hs>
name arg1 arg2 ... argN
</hs>

Это соответствует идее апплицирования: мы применяем функцию <code>name</code> к списку аргументов. Однако в математике существует и другая модель функции, а именно инфиксная модель. Если вы никогда не слышали это слово - не беспокойтесь, вы постоянно используете эту модель. Классический пример:

<hs>
1 + 2
</hs>

В данном случае у нас есть функция сложения, отражённая символом <code>+</code>, которая принимает на вход два аргумента. Но если бы мы хотели записать этот вызов неинфиксным, классическим способом, то получилось бы вот что:

<hs>
(+) 1 2
</hs>

Всё как обычно: мы апплицируем функцию <code>(+)</code> к двум аргументам. Однако предыдущая форма записи гораздо привычнее для нас, и при этом она значительно читабельнее.

Так вот и наши собственные функции можно вызывать как классическим способом, так и инфиксным. Например:

<hs>
full_address :: String -> Int -> String
full_address host port = 
    host ++ ":" ++ (show port)

main =
    do putStrLn (full_address host port)
    where host = "127.0.0.1"
          port = 80
</hs>

Здесь мы определили функцию, принимающую строку, соответствующую IP-адресу, и целое число, соответствующее порту, и возвращающую строку с полным адресом (включающую хост и порт вместе). Как видите, мы вызвали её классическим способом. Но мы можем вызвать её и инфиксным способом. Для этого достаточно при вызове заключить имя функции в обратные одинарные кавычки (этот символ располагается обычно на клавише с тильдой). Выглядит это так:

<hs>
main =
    do putStrLn (host `full_address` port)
    where host = "127.0.0.1"
          port = 80
</hs>

В инфиксной форме мы, как и со знаком сложения, заключаем имя функции <em>между</em> аргументами.

Давайте переименуем функцию для бОльшей литературности:

<hs>
with :: String -> Int -> String
with host port = 
    host ++ ":" ++ (show port)
</hs>

В этом случае инфиксная запись будет выглядеть значительно более привлекательно:

<hs>
main =
    do putStrLn (host `with` port)
    where host = "127.0.0.1"
          port = 80
</hs>

Довольно-таки симпатишно вышло. 

Конечно, инфиксную запись можно считать не более чем синтаксическим сахаром, но в ряде случаев такая запись может сделать код более удобным для чтения. Впрочем, чрезмерно увлекаться "инфиксностью" не рекомендуется (также как и, скажем, перегрузкой операторов в C++).
