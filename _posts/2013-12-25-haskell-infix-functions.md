---
layout: post
title: 'Haskell: об инфиксных функциях'
category: articles
tags: [Haskell]
comments: true
share: true
---

Как мы уже знаем, вызов чистой функции выглядит так:

{% highlight haskell %}
name arg1 arg2 ... argN
{% endhighlight %}

Это соответствует идее апплицирования: мы применяем функцию <code>name</code> к списку аргументов. Однако в математике существует и другая модель функции, а именно инфиксная модель. Если вы никогда не слышали это слово - не беспокойтесь, вы постоянно используете эту модель. Классический пример:

{% highlight haskell %}
1 + 2
{% endhighlight %}

В данном случае у нас есть функция сложения, отражённая символом <code>+</code>, которая принимает на вход два аргумента. Но если бы мы хотели записать этот вызов неинфиксным, классическим способом, то получилось бы вот что:

{% highlight haskell %}
(+) 1 2
{% endhighlight %}

Всё как обычно: мы апплицируем функцию <code>(+)</code> к двум аргументам. Однако предыдущая форма записи гораздо привычнее для нас, и при этом она значительно читабельнее.

Так вот и наши собственные функции можно вызывать как классическим способом, так и инфиксным. Например:

{% highlight haskell %}
full_address :: String -> Int -> String
full_address host port = 
    host ++ ":" ++ (show port)

main =
    do putStrLn (full_address host port)
    where host = "127.0.0.1"
          port = 80
{% endhighlight %}

Здесь мы определили функцию, принимающую строку, соответствующую IP-адресу, и целое число, соответствующее порту, и возвращающую строку с полным адресом (включающую хост и порт вместе). Как видите, мы вызвали её классическим способом. Но мы можем вызвать её и инфиксным способом. Для этого достаточно при вызове заключить имя функции в обратные одинарные кавычки (этот символ располагается обычно на клавише с тильдой). Выглядит это так:

{% highlight haskell %}
main =
    do putStrLn (host `full_address` port)
    where host = "127.0.0.1"
          port = 80
{% endhighlight %}

В инфиксной форме мы, как и со знаком сложения, заключаем имя функции *между* аргументами.

Давайте переименуем функцию для бОльшей литературности:

{% highlight haskell %}
with :: String -> Int -> String
with host port = 
    host ++ ":" ++ (show port)
{% endhighlight %}

В этом случае инфиксная запись будет выглядеть значительно более привлекательно:

{% highlight haskell %}
main =
    do putStrLn (host `with` port)
    where host = "127.0.0.1"
          port = 80
{% endhighlight %}

Довольно-таки симпатишно вышло. 

Конечно, инфиксную запись можно считать не более чем синтаксическим сахаром, но в ряде случаев такая запись может сделать код более удобным для чтения. Впрочем, чрезмерно увлекаться "инфиксностью" не рекомендуется (также как и, скажем, перегрузкой операторов в C++).
