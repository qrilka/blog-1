<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content>
        <meta name="author" content="Денис Шевченко">
        <link rel="icon" href="../../../static/images/favicon.ico">

        <title>Boost.Assign 2.0: упрощение или усложнение?</title>

        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

        <link href="../../../static/css/default.css" rel="stylesheet">
        
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

        <script>
          window.___gcfg = {
            lang: 'ru'
          };
        </script>

        <script src="https://apis.google.com/js/platform.js" async defer>
        </script>
    </head>

  <body>
    <div class="container">
        <nav class="navbar navbar-default navbar-fixed-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <div id="logo">
                <a class="navbar-brand" href="../../../" title="Домой">
                  Мысли и опыт
                </a>
              </div>
            </div>
            
            <div id="navbar" class="collapse navbar-collapse">
              <ul class="nav navbar-nav">
                <li><a href="../../../tags.html">Темы</a></li>
                <li><a href="../../../archive.html">Архив</a></li>
                <li><a href="../../../feed.xml">RSS</a></li>
              </ul>

              <ul class="nav navbar-nav navbar-right">
                <li><a href="http://dshevchenko.biz" target="_blank">root</a></li>
              </ul>
            </div>
          </div>
        </nav>

        <div id="content">
            <h1>Boost.Assign 2.0: упрощение или усложнение?</h1>

<div class="row">
    <div class="col-xs-5 col-sm-5 col-md-4 col-lg-4">
        <div class="post-info">
            <strong>where</strong> date = "19 сентября 2011"<br />
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tags = [<a href="../../../tags/boost.html">boost</a>]
        </div>
    </div>

    <div class="col-xs-2 col-sm-2 col-md-4 col-lg-4"></div>
  
    <div class="col-xs-5 col-sm-5 col-md-4 col-lg-4">
        
    </div>
</div>

<p>Ну, во-первых, если кому-то интересно взглянуть на документацию к этому хозяйству - прошу <a href="http://svn.boost.org/svn/boost/sandbox/assign_v2/libs/assign/v2/doc/html/index.html"><strong>сюда</strong></a>.</p>
<p>А, во-вторых, давайте вспомним, зачему была нужна эта библиотека? Она нужна была для того, чтобы упростить жизнь программиста. И не просто упростить, но сделать это <em>быстро</em>.</p>
<p>Давайте взглянем на самый первый пример использования первой Assign (желающие ознакомиться лично - <a href="http://www.boost.org/doc/libs/1_46_1/libs/assign/doc/index.html"><strong>сюда</strong></a>):</p>
<p>{% highlight cpp %} vector<int> v; v += 1,2,3,4,5,6,7,8,9;</p>
<p>map<string,int> m; insert( m )( “Bar”, 1 )( “Foo”, 2 ); {% endhighlight %}</p>
<p>Согласитесь, что даже без чтения остальной документации <em>любой</em> программист, имеющий хоть какой-то опыт работы с vector и map, поймёт этот код. Знаете почему? Потому что этот код простой. Я подчёркиваю: он простой даже для новичка.</p>
<p>Более того, этот новичок сможет начать использовать такую библиотеку <em>сразу же</em>, и ему не потребуется изучать всю документацию для этого. Это и есть то, что я называю: “библиотека, упрощающая жизнь программиста”.</p>
<p>А теперь взглянем на самый первый пример использования Assign 2.0 (он <strong><a href="http://svn.boost.org/svn/boost/sandbox/assign_v2/libs/assign/v2/doc/html/index.html">тут</a></strong>):</p>
<p>{% highlight cpp %} typedef std::map<std::string, int> map_; map_ cal; typedef map_::value_type p_;</p>
<p>boost::for_each( cal | do_csv_put&lt;2&gt;( “jan”, 31, “feb”, 28, “mar”, 31 ), std::cout &lt;&lt; lambda::bind( &amp;p_::first, lambda::<em>1 ) &lt;&lt; ‘:’ &lt;&lt; lambda::bind( &amp;p</em>::second, lambda:: _1 ) &lt;&lt; ‘’ ); // prints jan:31 feb:28 mar:31 {% endhighlight %}</p>
<p>Э-э… Хм…</p>
<p>Друзья, режьте меня на части, но я всё равно буду утверждать, что такой код отпугнёт новичка. Знаете почему? Потому что этот код сложный.</p>
<p>Вдумайтесь: это ведь самый первый и простейший пример, а-ля “Hello world”. Человек, который не знает, что такое lambda::bind и не знакомый с концепцией адаптеров (отражённной здесь перегруженным <code>operator|</code>) увидит это и подумает: “Ёлки-палки, если это - простейший пример, то что же там дальше?! И это библиотека для упрощения работы с контейнерами?!” Получается, такому человеку придётся хотя бы поверхностно познакомиться с лямбда-выражениями (и с Boost.Lambda в частности) только лишь для того, чтобы понять первый пример!</p>
<p>Я понимаю, есть библиотеки, который трудно начать использовать <em>сразу</em>. Spirit, MPL, Proto и некоторые другие действительно требуют достаточно глубокой подготовки. Но эти библиотеки являются серьёзными инструментами, и они вовсе не предназначены для того, чтобы их начали использовать через пару минут после установки Boost. Понятно, что если человек собирается создавать собственный DSEL на основе Proto, то он должен обладать достаточно глубокими знаниями C++, и ему, разумеется, придётся изучить документацию к Proto весьма глубоко.</p>
<p>Однако такие библиотеки, как Assign, именно для того и предназначены, чтобы их можно было использовать <em>сразу</em>, и чтобы высокой квалификации для этого не требовалось. Это те библиотеки, с которых начнёт новичок и по которым этот новичок будет судить о Boost в целом. И вот представьте себе, как он читает аннотацию к Assign:</p>
<p><strong>Filling containers with constant or generated data has never been easier.</strong></p>
<p>Чего-чего? Никогда не было проще? Вы что, издеваетесь? Я вспоминаю себя при освоении Assign первой версии, и если бы мне <em>тогда</em> дали Assign 2.0, я бы ужаснулся.</p>
<p>По моему мнению, авторы Assign 2.0 пошли куда-то не туда. Библиотека, предназначенная, по сути, лишь для того, чтобы упростить вставку элементов в контейнер, обязана быть простой. В противном случае зачем она нужна?</p>

<div id="socialButtons">
    <a href="https://twitter.com/share" class="twitter-share-button" data-lang="ru">Твитнуть</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

    <div class="g-plus" data-action="share" data-annotation="bubble"></div>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'dshevchenko'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    

        </div> 

        <div id="searchForm">
            <script>
              (function() {
                var cx = '007697214108744450483:ccjauglh7ao';
                var gcse = document.createElement('script');
                gcse.type = 'text/javascript';
                gcse.async = true;
                gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                    '//www.google.com/cse/cse.js?cx=' + cx;
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(gcse, s);
              })();
            </script>
            <gcse:search></gcse:search>
        </div>

        <footer class="footer">
            Сайт работает на <strong><a href="http://jaspervdj.be/hakyll/" target="_blank">Hakyll</a></strong> и живёт на <strong><a href="https://github.com/denisshevchenko/blog" target="_blank">GitHub</a></strong>.
            <div class="copyright-note">
                Исходный код данного сайта, а также все опубликованные на нём материалы распространяются на условиях <a href="https://github.com/denisshevchenko/blog/blob/master/LICENSE" target="_blank">свободной лицензии MIT</a>.
            </div>
        </footer>
    </div>
  </body>
</html>

