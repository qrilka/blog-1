---
title: Замечание про оптимизацию
tags: IT
---

*Сразу уточню: в этой заметке я не говорю о тех программных нишах, где скорость выполнения является критическим требованием. Я говорю о приложениях, взаимодействующих с человеком через графический интерфейс.*

Никто из нас не любит тормозных программ. И, зная эту простую истину, многие разработчики оптимизируют свои приложения. Оптимизируют, стараясь выгадать... Кстати, а что же они стараются выгадать?

Представим себе кнопку, клик по которой инициирует некое действие, ну, скажем, появление какого-нибудь обычного диалогового окна. Естественно, между кликом и полной отрисовкой виджета (когда наши глаза скажут нам, что окно полностью появилось) существует некая временнАя задержка. Эта задержка бывает разной и зависит от множества факторов (начиная от используемой оконной среды и заканчивая мощностью компьютера), но суть не в этом. Суть в фактической значимости этой задержки глазами пользователя.

Если данное окно появится через 3 секунды после клика на кнопке, большинство пользователей воспримет это как очень сильные тормоза. Если через 1 секунду - это всё ещё можно будет назвать тормозами, но уже никак не сильными (и многие пользователи будут вполне удовлетворены такой задержкой). Если через 0.5 секунды - это уже нельзя будет назвать тормозами (и такая задержка полностью удовлетворит 99% пользователей). Если через 0.1 секунды - появление окна будет воспринято (любым) пользователем как очень быстрое событие. Если через 0.05 секунды и менее - у (любого) пользователя сложится впечатление абсолютно мгновенной реакции.

Итак, будем исходить из того, что мы (как создатели приложения) хотим полностью избавить пользователя от ощущения тормозов. В таком случае в нашем распоряжении есть запас в 50 мс. Целых 50 мс. Мы хорошо знаем, что на любом мало-мальски современном компьютере это весьма большой период, однако, повторю, в глазах (любого) пользователя этот период абсолютно незаметен.

А теперь представим себе, что мы решили-таки оптимизировать появление этого диалога и снизили задержку с 50 мс до 10 мс. То есть в пять раз. Согласитесь, звучит сильно: в пять раз! Но что это означает на практике? А означает это вот что...

Во-первых, пользователь не заметит эту разницу, как бы внимательно он ни смотрел на экран. Таким образом, с точки зрения пользователя ценность нашей оптимизации равна нулю. Без палочки.

Во-вторых, во имя данной оптимизации мы (неизбежно) усложнили код. Как именно? Ну, скажем, заранее создали, настроили и сохранили виджет диалога, чтобы по клику на кнопку лишь отрисовать его. Или ввели некий буфер данных, предназначенных для отображения в диалоге, или ещё как-то. А что это означает? Это означает, что код стал (потенциально) менее надёжным. В нём стало (потенциально) проще допустить ошибку. В нём стало (потенциально) труднее искать ошибку. Его стало (потенциально) сложнее сопровождать.

И что же в итоге? В итоге мы усложнили код ценою выигрыша, о котором пользователь даже не узнает! Таким образом, можно смело констатировать: **подобного рода оптимизация объективно вредна, поскольку не только не улучшает, но ухудшает приложение**.
