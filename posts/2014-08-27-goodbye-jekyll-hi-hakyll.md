---
title: Прощай, Jekyll... Приветствую, Hakyll!
tags: Hakyll, Jekyll
---

Доброго всем времени суток. После продолжительной паузы (обусловленной рабочими дедлайнами и семейными заботами) спешу продолжить делиться с вами моими мыслями о разработке и иже с нею. Но сегодня расскажу пару слов о том, что удивило вас, когда вы зашли сегодня на эту страницу.

Да, это наконец-то произошло: блог переехал с [Jekyll](http://jekyllrb.com) на [Hakyll](http://jaspervdj.be/hakyll/). Я давно этого хотел, но руки никак не доходили. А недавно появилась пара окошек (относительно) свободного времени - и я решился. К счастью, переезд отнял меньше времени и сил, нежели я предполагал. Jekyll - это прекрасный инструмент, и я многим его рекомендую, но лично мне Hakyll пришёлся ближе к сердцу. Впрочем, как и в случае с Haskell, это была любовь *со второго* взгляда.

## О чём идёт речь?

Воспринимайте Hakyll как "Jekyll специально для Haskell-истов". С технической точки зрения это библиотека, [живущая в Hackage](https://hackage.haskell.org/package/hakyll), предназначенная для генерации статического сайта из markdown-статей. Впрочем, поддерживается не только markdown, но меня остальные форматы в данной ситуации не интересовали.

Понятно, что сама библиотека не способна что-либо сгенерить, поэтому нам потребуется программа. И в этом фундаментальное отличие от Jekyll: создавая сайт на Jekyll, вам вовсе не обязательно влезать в Ruby-код, однако в случае с Hakyll вам нужно написать свою небольшую программу, использующую упомянутую библиотеку, затем скомпилировать эту программу нашим любимым `ghc`, а затем запустить её. Тут-то и появится наш великолепный сайт.

## Плюсы

Прежде всего, скорость генерации. Тут Jekyll, как говорится, нервно курит в сторонке: увеличение производительности, по моим наблюдениям, составляет процентов 500, если не больше. Впрочем, это ничуть не удивляет: весьма шустрый компилируемый язык в сравнении с далеко не самым шустрым интерпретируемым языком всегда выиграет.

Следующий плюс: гибкость. Из-за того что мы пишем свою собственную программу-генератор, перед нами открываются большие возможности. К тому же мы не ограничены кодом Hakyll-библиотеки: перед нам всё богатство Haskell-пакетов. Это позволяет нам, при определённом терпении, настроить такой сайт, какой мы только сможем себе представить. Разумеется, нам придётся (и, вероятно, глубоко) влезать в Haskell-код, но тому есть оправдание: едва ли Hakyll станет использовать человек, незнакомый с Haskell... ;-)

## Минусы

Главным минусом Hakyll является документация. Её *откровенно* мало, и она... хм... не очень понятная. Причём я имею в виду как документацию на официальном сайте, так и документацию к библиотеке в Hackage. Так что если хочешь построить сайт на Hakyll - смотри в код других сайтов, построенных на Hakyll, и делай как там. Благо, таких сайтов [достаточно много](http://jaspervdj.be/hakyll/examples.html).

Другим минусом Hakyll является малое количество готовых тем оформления. Тут Jekyll выигрывает однозначно: готовых тем для него - многие десятки (если уже не сотни). Впрочем, вы можете взять Jekyll-тему и натянуть её на Hakyll. Вероятно, я в будущем поэкспериментирую на этом поле.

## О новых путях

Я настроил все пути максимально приближенными к предыдущим, Jekyll-овским, чтобы ссылки из Гугла или Disqus остались валидными. Однако одну вещь я всё-таки сделал иначе. Раньше дата в пути была такая:

```bash
http://blog.dshevchenko.biz/2014/6/7/haskell-data-analysis-cookbook.html
```

а теперь такая:

```bash
http://blog.dshevchenko.biz/2014/06/07/haskell-data-analysis-cookbook.html
                                 ^  ^
                                 нули
```

Я подумал, что нули перед номерами месяца и числа выглядят аккуратнее. К тому же это выравнивает все даты по одной ширине: у нас теперь всегда 8 цифр. 

## О ближайших планах

Осталось доделать RSS и метки (вероятно, в виде облака). Скоро будет.


