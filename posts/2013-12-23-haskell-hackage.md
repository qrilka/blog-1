---
title: Haskell: устанавливаем пакет из Hackage
tags: Haskell
---

<h3>Готовимся</h3>

Все приведённые ниже команды выполняются в терминале из корневой папки нашего проекта.

Для начала выполним команду:

<bash>
cabal update
</bash>

Эта команда обновляет список пакетов из вышеупомянутого репозитория, поэтому в ответ мы мы увидим нечто подобное:

<bash>
Downloading the latest package list from hackage.haskell.org
</bash>

Чуточку терпения - и список обновлён. Рекомендуется периодически выполнять эту команду, дабы поддерживать список доступных пакетов в актуальном состоянии.

<h3>Выбираем нужный пакет</h3>

Заходим на страницу списка пакетов и ищем. В частности, мне понадобилось установить пакет **<a href="http://hackage.haskell.org/package/filemanip">filemanip</a>**, предназначенный для работы с файловой системой. Кстати, поиск нужных вам пакетов можно производить в **<a href="http://www.haskell.org/hoogle/">Hoogle</a>**.

Устанавливаем пакет следующей командой:

<bash>
cabal install filemanip
</bash>

В ответ последует список со всякими умными строками наподобие этого:

<bash>
...
Downloading filemanip-0.3.6.2...
Configuring filemanip-0.3.6.2...
Building filemanip-0.3.6.2...
...
Installing library in
/Users/dshevchenko/Library/Haskell/ghc-7.6.3/lib/filemanip-0.3.6.2/lib
Registering filemanip-0.3.6.2...
Installed filemanip-0.3.6.2
Updating documentation index /Users/dshevchenko/Library/Haskell/doc/index.html
</bash>

Итак, пакет установлен.

<h3>Указываем пакет в .cabal-файле</h3>

Открываем конфигурационный <code>.cabal</code>-файл (помните про такой, не так ли?), находящийся в корне нашего проекта, и дописываем наш только что установленный пакет:

```haskell
executable Haskell
    main-is:         main.hs            
    other-modules:   Haq
    hs-source-dirs:  src 
                     src/utils
    build-depends:   base == 4.6.*, filemanip
```

Как видите, мы просто дописали в параметр <code>build-depends</code> название нового пакета. Обратите внимание, что имена пакетов в этом параметре указываются через запятую, это важно.

Если вы пропустите этот шаг, то воспользоваться каким-либо из модулей данного пакета вы, разумеется, не сможете. Напоминаю, что пакет представлен набором модулей, которые можно импортировать в ваш код (а импорт модуля, напоминаю, подобен включению файла с помощью <code>#include</code>-директивы).

Впрочем, даже если вы всё-таки забудете указать установленный пакет *и при этом* попытаетесь импортировать какие-либо из его модулей в ваш проект, компилятор вежливо поправит вас:

<bash>
src/main.hs:3:8:
    Could not find module `System.FilePath.Find'
    It is a member of the hidden package `filemanip-0.3.6.2'.
    Perhaps you need to add `filemanip' to the build-depends in your .cabal file.
    Use -v to see a list of the files searched for.
</bash>

<h3>Подключаем нужные модули</h3>

А теперь открываем наш файл (например, <code>main.hs</code>) и дописываем в его верхней части следующую строку:

```haskell
import System.FilePath.Find
```

Этой инструкцией мы импортировали конкретный модуль из установленного пакета. Теперь мы сможем использовать содержимое этого модуля в нашем проекте.

Напоследок выполним команды:

<bash>
cabal configure
cabal build
</bash>

Готово!

Лично мне очень понравилась такая философия работы с пакетами. Во-первых, утилита cabal предоставляет единый централизованный способ установки пакетов, во-вторых, сама установка занимает три простейших шага (установить, прописать в <code>.cabal</code>-файле, импортировать нужные модули), а в-третьих, я могу установить только те пакеты, которые мне реально нужны.

На сегодня достаточно, но мы обязательно продолжим изучение <code>cabal</code>, а уж к пакетам из Hackage мы будем возвращаться не раз и не два.
