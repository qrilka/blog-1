<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<link href='http://fonts.googleapis.com/css?family=Cuprum:400,400italic,700&subset=latin,cyrillic,latin-ext' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Lobster&subset=latin,cyrillic,latin-ext' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Philosopher:400,400italic,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>
<title>В защиту Haskell: по следам одного Хабра-спора... &#8211; Мысли вслух</title>
<meta name="description" content="блог C++-программиста, влюбившегося в Haskell">
<meta name="keywords" content="Haskell">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.dshevchenko.biz/images/site-logo.png">
<meta name="twitter:title" content="В защиту Haskell: по следам одного Хабра-спора...">
<meta name="twitter:description" content="блог C++-программиста, влюбившегося в Haskell">
<meta name="twitter:creator" content="@dshevchenko_biz">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="В защиту Haskell: по следам одного Хабра-спора...">
<meta property="og:description" content="блог C++-программиста, влюбившегося в Haskell">
<meta property="og:url" content="http://blog.dshevchenko.biz/2014/5/11/haskell-discussion.html">
<meta property="og:site_name" content="Мысли вслух">

<meta name="google-site-verification" content="3kcHwh5V-AOcint1jCdIfBLkmFXD6-93M_DHpVFpjUI">



<link rel="canonical" href="http://blog.dshevchenko.biz/2014/5/11/haskell-discussion.html">
<link href="http://blog.dshevchenko.biz/feed.xml" type="application/atom+xml" rel="alternate" title="Мысли вслух Feed">
<link rel="author" href="https://google.com/+DenisShevchenko?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://blog.dshevchenko.biz/assets/css/main.min.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://blog.dshevchenko.biz/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://blog.dshevchenko.biz/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://blog.dshevchenko.biz/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://blog.dshevchenko.biz/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://blog.dshevchenko.biz/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://blog.dshevchenko.biz/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://blog.dshevchenko.biz/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
	        
			<li>
				
					<a href="http://dshevchenko.biz">root</a>
				 
			</li>
	        
			<li>
				
					<a href="http://blog.dshevchenko.biz/articles/">Записи</a>
				 
			</li>
	        
			<li>
				
					<a href="http://blog.dshevchenko.biz/tags/">Метки</a>
				 
			</li>
	        
	        <li><a href="http://blog.dshevchenko.biz/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
	        <li class="dosearch"><i class="icon-search"></i> Поиск</li>
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<div class="search-wrapper">
	<div class="search-form">
		<input type="text" class="search-field" placeholder="Ищем...">
		<i class="icon-remove-sign icon-2x"></i>
		<ul class="search-results post-list"></ul><!-- /.search-results -->
	</div><!-- /.search-form -->
</div><!-- ./search-wrapper -->

<header class="masthead">
	<div class="wrap">
        
    		<a href="http://blog.dshevchenko.biz/" class="site-logo" rel="home" title="Мысли вслух"><img src="http://blog.dshevchenko.biz/images/site-logo.png" width="200" height="200" alt="Мысли вслух logo" class="animated fadeInUp"></a>
        
        <h1 class="site-title animated fadeIn"><a href="http://blog.dshevchenko.biz/">Мысли вслух</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">блог C++-программиста, влюбившегося в Haskell</h2>
	</div>
</header><!-- /.masthead -->


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="http://blog.dshevchenko.biz/tags/#Haskell" title="Pages tagged Haskell">Haskell</a></span>
        
          <h1 class="entry-title">В защиту Haskell: по следам одного Хабра-спора...</h1>
        
      </header>
      <footer class="entry-meta">
        <!-- <img src="http://blog.dshevchenko.biz/images/bio-photo.jpg" alt="Денис Шевченко photo" class="author-photo">
        <span class="author vcard">By <span class="fn"><a href="http://blog.dshevchenko.biz/about/" title="About Денис Шевченко">Денис Шевченко</a></span></span> -->
        <span class="entry-date date published"><time datetime="2014-05-11T00:00:00+04:00"><i class="icon-calendar-empty"></i> май 11, 2014</time></span>
        
        <span><a href="http://blog.dshevchenko.biz/2014/5/11/haskell-discussion.html" rel="bookmark" title="В защиту Haskell: по следам одного Хабра-спора..."><i class="icon-link"></i> Вечная ссылка</a></span>
        <span class="entry-comments"><i class="icon-comment-alt"></i> <a href="#disqus_thread">Комментарии</a></span>
        
        <span class="social-share-facebook">
            <a href="https://www.facebook.com/sharer/sharer.php?u=http://blog.dshevchenko.biz/2014/5/11/haskell-discussion.html" title="Share on Facebook" itemprop="Facebook"><i class="icon-facebook-sign"></i> Like</a></span>
        <span class="social-share-twitter">
            <a href="https://twitter.com/intent/tweet?hashtags=articles&text=В защиту Haskell: по следам одного Хабра-спора...&url=http://blog.dshevchenko.biz/2014/5/11/haskell-discussion.html&via=dshevchenko_biz" title="Share on Twitter" itemprop="Twitter"><i class="icon-twitter-sign"></i> Tweet</a></span>
        <span class="social-share-googleplus">
            <a href="https://plus.google.com/share?url=http://blog.dshevchenko.biz/2014/5/11/haskell-discussion.html" title="Share on Google Plus" itemprop="GooglePlus"><i class="icon-google-plus-sign"></i> +1</a></span>
            <!-- /.social-share -->
      </footer>
      <div class="entry-content">
        <p>На бескрайних просторах Хабра встретилась мне одна <a href="http://habrahabr.ru/post/133277/">любопытнейшая тема</a>. Она довольно стара (ноябрь 2011 года), но это не делает её менее интересной. И интересна она не только тем, что предельно понятным языком объясняет суть теории категорий (да-да, того самого “страшного” математического раздела, из которого вышли понятия монады, моноида и иже с ними), но и тем, что в комментариях к этой теме завязалась примечательная дискуссия. На самом деле, дискуссия там весьма обширна, но меня зацепили комментарии одного пользователя, некоего Бахтерева Михаила Олеговича (зарегистрированного под ником <code>mikhanoid</code>).</p>

<p>Вот с чего всё началось:</p>

<blockquote>
  <p>Эх. Вот было бы ещё в Haskell так же просто байтик по адресу 0xb8000 записать, цены бы ему не было. А так. Ну да, математика, на да, формально, ну да, можно мозг поупражнять. А дальше? А ведь не особо опытные менджеры уже начинают пытаться внедрять Haskell в production. Ужас. </p>
</blockquote>

<p>Затравка цепляет. Ему совершенно справедливо отвечают, мол, не все задачи сводятся к «записать байтик». На что он говорит:</p>

<blockquote>
  <p>В разработке software — все. Как бы всё равно никому ещё не удалось разработать не-фон-Неймановский универсальный процессор. А там запись байтиков направо и налево :) И вот нам говорят: машина работает одним способом, но нет, мы не будем придумывать язык, который позволит естественное для машины поведение программировать наиболее естественным образом. Мы, наоборот, абстрагируемся, а потом будем ковыряться левой пяткой в правом ухе для решения простейших задач. Не понимаю я, к чему это?</p>
</blockquote>

<p>Выходит, абстрагирование от архитектуры процессора вынуждает нас ковыряться левой пяткой в правом ухе для решения простейших задач… Довод из прошлого тысячелетия, но ладно уж, продолжим:</p>

<blockquote>
  <p>Дело не собственно в памяти. Чтобы организовать обмен данными с внешним миром, нам нужно иметь канал связи с этим миром. А канал связи — это система, у которой нужно явно менять состояния. Если мы рассматриваем сам Haskell (ну, или любой чистый функциональный язык), то там нет такой концепции. Нельзя изменить состояние канала, можно только лишь создать новый канал. Но как внешний мир может узнать об изменении канала связи?</p>
</blockquote>

<blockquote>
  <p>Вот в чём проблема. В Haskell, конечно, есть и указатели, и ссылки, и IO, но их невозможно запрограммировать на самом Haskell, поэтому они создаются искусственно, через специальные монады связанные со внешними библиотеками на Си. И эти монады отличаются от тех, которые можно создать на самом Haskell.</p>
</blockquote>

<p>И ещё:</p>

<blockquote>
  <p>Так это и есть философская проблема. Скажем, для Си или даже, допустим, Lua, вывод на консоль может быть написан на самих Си или Lua. А чистый функциональный язык уже не допускает этого.</p>
</blockquote>

<blockquote>
  <p>И тут нельзя сказать, что это просто консоль неправильная, не функциональная, потому что не может быть функциональной консоли.</p>
</blockquote>

<p>И вывод:</p>

<blockquote>
  <p>Поэтому нельзя на функциональном языке выразить работу с оборудованием и внешним миром. Нужны всякие костыли разной степени костыльности. </p>
</blockquote>

<p>Вот такие доводы. К слову, этот Михаил Олегович - человек очень опытный, достаточно взглянуть на его темы на Хабре. Разумеется, вступать с таким человеком в дискуссию на его уровне я бы не стал, ибо занимаюсь задачами куда как менее сложными, чем он. Поэтому выскажу своё мнение как практик. </p>

<p>Рассмотрим вот такую строку:</p>

<div class="highlight"><pre><code class="haskell"><span class="nf">main</span> <span class="ow">=</span> <span class="n">readFile</span> <span class="s">&quot;/Users/dshevchenko/text&quot;</span> <span class="o">&gt;&gt;=</span> <span class="n">putStr</span>
</code></pre></div>

<p>Содержимое файла <code>/Users/dshevchenko/text</code> выводится на консоль. Вы представляете себе, сколько различных программных действий совершается от момента запуска такого кода до момента отображения текста файла в терминале? Их очень много, начиная от вызовов библиотечных функций и заканчивая работой ряда драйверов. И если бы мы очень захотели, то могли бы перечислить все эти действия. Только нужно ли нам это? Нет, нам нужно вывести содержимоей файла на консоль. И такой код прекрасно справляется с этой задачей. </p>

<p>К чему это я… Михаил Олегович совершенно справедливо отмечает, что на Haskell <em>как таковом</em> нельзя напрямую взаимодействовать с адресами байтов, и поэтому, разумееется, вывод на консоль не может быть написан на чисто функциональном языке. Однако, насколько я понял тон Михаила Олеговича, он ставит сей факт в укор чисто функциональному подходу как таковому. Мол, раз на нём нельзя явно изменять состояние областей памяти, значит этот язык пригоден исключительно для теоретически-академических целей, а места в real world ему нету…</p>

<p>И вот сижу я и думаю - а почему, собственно, это такая проблема? Понятно, что где-то под капотом Haskell есть системные функции, написанные на старом добром C, и именно эти функции выполняют всю низкоуровневую работу. Но мне-то зачем об этом знать? Я, как программист-практик, знать этого не хочу, да и не обязан. Разумеется, в процессе выполненения кода, выводящего текст на консоль, происходит многократное изменение различных программных состояний, но мне до этого нет никакого дела. Если всё это под капотом, пусть там и остаётся, а я лучше буду думать о моих задачах, а не о том, как там байтики записываются.</p>

<p>И я считаю, это очень хорошо и правильно, что вся низкоуровневая работа делегируется коду, написанному на языке C. Вы что думаете, в том же C++ память выделяется оператором <code>new</code>? Нет, она выделяется старой доброй <code>malloc</code>, а <code>new</code> есть не более чем удобный синтаксический сахар. Значит ли это, что мы не должны пользоваться оператором <code>new</code>? Едва ли…</p>

<p>Так что в наших процессорах байтики пусть записываются направо и налево, а мы, живущие в 2014 году, позволим себе думать уже не о байтиках, а о других вещах.</p>


        <div id="disqus_thread"></div><!-- /#disqus_thread -->
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://blog.dshevchenko.biz/2014/4/29/waffle-io.html" class="btn" title="Открыл исходники - открой и планы: waffle.io">Предыдущий</a>
      
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2011-2014 Денис Шевченко. Сайт работает на <a href="http://jekyllrb.com">Jekyll</a> с использованием <a href="http://mademistakes.com/so-simple/">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="http://twitter.com/dshevchenko_biz" title="В Twitter" target="_blank"><i class="icon-twitter icon-2x"></i></a>
	<a href="http://facebook.com/dshevchenko.biz" title="На Facebook" target="_blank"><i class="icon-facebook icon-2x"></i></a>
	<a href="https://google.com/+DenisShevchenko" title="На Google+" target="_blank"><i class="icon-google-plus icon-2x"></i></a>
	<a href="http://linkedin.com/in/dshevchenkobiz" title="И в LinkedIn я тоже есть" target="_blank"><i class="icon-linkedin icon-2x"></i></a>
	<a href="http://stackexchange.com/users/131381/denis-shevchenko" title="И даже на StackExchange я есть" target="_blank"><i class="icon-stackexchange icon-2x"></i></a>
	
	
	<a href="http://github.com/denisshevchenko" title="И конечно же на Github" target="_blank"><i class="icon-github icon-2x"></i></a>
	
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://blog.dshevchenko.biz/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://blog.dshevchenko.biz/assets/js/scripts.min.js"></script>

<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : 'http://blog.dshevchenko.biz/search.json',
          searchResults : '.search-results',
          template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {
    
     var bs = {
          close: $(".icon-remove-sign"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.dosearch')
      };
    
    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });
    
      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>


<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'dshevchenko'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>	        

</body>
</html>
